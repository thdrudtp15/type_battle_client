# 📝 타이핑 배틀틀

웹 소켓을 이용한 타이핑 대결 웹 어플리케이션.

---

## 🔗 배포 링크

-   https://typebattle_lime.vercel-app

---

## 🚀 시작하기

### 설치

```bash
npm install
```

### 개발 서버 실행

```bash
npm run dev
```

http://localhost:5173 에서 확인 가능합니다.

### 빌드

```bash
npm run build
npm run start
```

## ✨ 주요 기능

-   **실시간 타이핑 대결**: WebSocket을 이용한 실시간 1:1 타이핑 대결
-   **자동 매칭 시스템**: 대기 중인 플레이어와 자동으로 매칭
-   **실시간 진행 상황**: 상대방의 진행률, 점수, 정확도, CPM 실시간 표시
-   **점수 계산**: 타이핑 정확도 기반 점수 및 페널티 시간 계산

## 🛠️ 기술 스택

**클라이언트**

-   React 19 + TypeScript
-   Vite
-   Socket.io-client
-   TailwindCSS
-   Motion (애니메이션)

**서버**

-   Node.js + Express
-   Socket.io
-   TypeScript
-   [깃헙](https://github.com/thdrudtp15/type_battle_server)

## 📝 구현 기능

### 소켓 통신 관리

-   **커스텀 훅 (`useSocket`)**: 소켓 연결 상태 관리 및 이벤트 핸들러 통합
-   **연결 상태 관리**: `disconnected`, `connected`, `connecting`, `finding_match`, `found_match`, `match_start`, `match_result` 상태 관리
-   **자동 재연결**: 네트워크 끊김 시 최대 5회 재연결 시도, 재연결 딜레이 점진적 증가
-   **게임 상태 초기화**: `resetGame` 함수로 게임 종료 시 모든 상태 리셋

### 타이핑 입력 처리

-   **실시간 입력 검증**: 문장과 입력값을 문자 단위로 비교하여 정확/오타 시각적 표시
-   **입력 필드 자동 포커스**: 게임 시작 시 자동 포커스, 게임 종료 시 자동 블러 처리
-   **Enter 키 제출**: 문장 완성 시 Enter 키로 제출, 입력 필드 자동 초기화
-   **키 입력 카운팅**: CPM 계산을 위한 키 입력 횟수 추적 (특수키 제외)

### 실시간 데이터 표시

-   **CPM 실시간 계산**: 500ms 간격으로 CPM 계산 및 업데이트
-   **CPM 전송 최적화**: 500ms throttle로 서버 부하 감소
-   **진행 상황 표시**: 진행률, 점수, 정확도, CPM을 실시간으로 표시
-   **상대방 정보 동기화**: 소켓을 통해 상대방의 진행 상황 실시간 수신 및 표시

### UI/UX

-   **문장 시각화**: 정확한 문자(흰색), 미입력(회색), 오타(빨간색 밑줄)로 구분
-   **애니메이션**: Framer Motion을 활용한 부드러운 컴포넌트 등장 애니메이션
-   **숫자 애니메이션**: `AnimateNumber` 컴포넌트로 점수/정확도 변화 시 부드러운 숫자 증가 효과
-   **CPM 게이지**: CPM 값에 따른 시각적 게이지 바 표시 (최대 1200 CPM 기준)
-   **결과 모달**: 승패 판정, 점수/정확도/시간 비교, 비교 아이콘 표시

### 성능 최적화

-   **React.memo**: 불필요한 리렌더링 방지를 위한 컴포넌트 메모이제이션
-   **useCallback**: 이벤트 핸들러 최적화로 함수 재생성 방지
-   **인터벌 관리**: CPM 계산 인터벌을 useEffect cleanup으로 정리하여 메모리 누수 방지

## 📚 문제 해결

### 소켓 통신 관련

-   **소켓 재연결 처리**: 네트워크 불안정 시 자동 재연결 로직 구현 (최대 5회 시도)
-   **연결 상태 동기화**: 소켓 연결/해제 시 UI 상태와 실제 연결 상태 동기화
-   **게임 상태 초기화**: 연결 끊김 시 모든 게임 상태를 초기 상태로 리셋하여 일관성 유지

### 상태 관리 및 동기화

-   **타이핑 로그 관리**: 문장 완성 시에만 로그 전송하여 불필요한 네트워크 트래픽 감소
-   **입력값 동기화**: `onChange`와 `onKeyDown` 이벤트를 통합하여 입력값 실시간 동기화
-   **게임 진행 상태 관리**: `isCompleted` 플래그로 게임 종료 여부 확인 및 입력 비활성화

### 성능 최적화

-   **리렌더링 최적화**: `React.memo`로 불필요한 컴포넌트 리렌더링 방지 (Input, Sentence, Players 등)
-   **CPM 전송 최적화**: throttle(500ms) 적용으로 서버 부하 감소 및 네트워크 트래픽 최소화
-   **인터벌 정리**: CPM 계산 인터벌을 useEffect cleanup으로 정리하여 메모리 누수 방지

### UI/UX 개선

-   **입력 필드 포커스 관리**: 게임 상태에 따라 자동 포커스/블러 처리로 사용자 경험 개선
-   **시각적 피드백**: 타이핑 정확도에 따른 실시간 색상 변경으로 즉각적인 피드백 제공
-   **애니메이션 최적화**: Framer Motion의 `initial`, `animate`, `transition`으로 자연스러운 UI 전환
